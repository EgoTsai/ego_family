<!DOCTYPE html>
<html lang="zh-TW">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title> ç¾é£Ÿå¤§å°æ±º  æœ€æ„›é£Ÿç‰©2é¸1 (å–¬å–¬è»’è»’å°ˆç”¨) </title>
   <!-- è¼‰å…¥ Tailwind CSS -->
   <script src="https://cdn.tailwindcss.com"></script>
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
   <style>
       /* ä½¿ç”¨ Inter ä½œç‚ºåŸºç¤å­—å‹ï¼ŒNoto Sans TC ä½œç‚ºä¸­æ–‡å­—å‹ */
       body {
           font-family: 'Inter', 'Noto Sans TC', sans-serif;
       }
       /* è‡ªå®šç¾©æŒ‰éˆ•å‹•æ…‹æ•ˆæœ */
       .choice-btn {
           transition: all 0.3s ease;
           transform: scale(1);
       }
       .choice-btn:hover {
           transform: scale(1.03);
           box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
       }
       .choice-btn:active {
           transform: scale(0.98);
       }
   </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex items-center justify-center p-4 md:p-8">


   <div id="app" class="w-full max-w-4xl mx-auto text-center">


       <!-- æ­¡è¿ç•«é¢ -->
       <div id="welcome-screen">
           <h1 class="text-4xl md:text-5xl font-bold mb-4">ç¾é£Ÿå¤§å°æ±ºï¼(è»’è»’å–¬å–¬å°ˆç”¨) </h1>
           <p class="text-xl text-gray-300 mb-8">è´å®¶å°‡ä¸æ–·æ¥å—æŒ‘æˆ°ï¼Œé¸å‡ºä½ å¿ƒç›®ä¸­çš„ Top 3ï¼</p>
           <p class="text-lg text-gray-400 mb-8">å®Œæˆ 10 å›åˆå¾Œï¼Œå°‡é¡¯ç¤ºæœ¬å±€æˆ°ç¸¾èˆ‡å…¨ç«™ç´¯ç©æ’è¡Œæ¦œï¼</p>
           <button id="start-button" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full text-2xl shadow-lg transition duration-300">
               é–‹å§‹å°æ±ºï¼
           </button>
           <!-- *** æ–°å¢ï¼šæ¸…é™¤ç´¯ç©è¨˜éŒ„æŒ‰éˆ• *** -->
           <button id="clear-storage-button" class="block mx-auto mt-6 text-sm text-gray-500 hover:text-red-500 transition duration-300">
               æ¸…é™¤æ‰€æœ‰ç´¯ç©è¨˜éŒ„
           </button>
       </div>


       <!-- éŠæˆ²ç•«é¢ (åŒ…å« "é‡é ­é–‹å§‹" æŒ‰éˆ•) -->
       <div id="game-screen" class="hidden relative pt-10">
          
           <button id="restart-game-button" class="absolute top-0 right-0 bg-red-600 hover:bg-red-700 text-white font-semibold py-1 px-3 rounded-full text-sm shadow-lg transition duration-300">
               é‡é ­é–‹å§‹
           </button>


           <h2 id="progress-counter" class="text-2xl font-semibold text-gray-400 mb-6 text-center">ç¬¬ 1 / 10 å ´</h2>
          
           <div class="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-8">
               <!-- é¸é … A (è¡›å†•è€…) -->
               <button id="choice-a" class="choice-btn flex flex-col items-center justify-center bg-gray-800 border-2 border-blue-600 rounded-lg p-8 md:p-12 w-full md:w-2/5 shadow-xl h-48 md:h-64">
                   <span class ="text-xs text-blue-400 font-bold mb-2">è¡›å†•è€…</span>
                   <span id="choice-a-icon" class="text-5xl md:text-6xl mb-4">ğŸ¥Ÿ</span>
                   <span id="choice-a-name" class="text-2xl md:text-3xl font-bold">å°ç± åŒ…</span>
               </button>


               <span class="text-4xl font-bold text-gray-500 my-4 md:my-0">VS</span>


               <!-- é¸é … B (æŒ‘æˆ°è€…) -->
               <button id="choice-b" class="choice-btn flex flex-col items-center justify-center bg-gray-800 border-2 border-gray-700 hover:border-pink-500 rounded-lg p-8 md:p-12 w-full md:w-2/5 shadow-xl h-48 md:h-64">
                   <span class ="text-xs text-pink-400 font-bold mb-2">æŒ‘æˆ°è€…</span>
                   <span id="choice-b-icon" class="text-5xl md:text-6xl mb-4">ğŸ</span>
                   <span id="choice-b-name" class="text-2xl md:text-3xl font-bold">ç¾©å¤§åˆ©éºµ</span>
               </button>
           </div>


           <!-- æŸ¥çœ‹çµæœæŒ‰éˆ• (é è¨­éš±è—) -->
           <button id="view-results-button" class="hidden mt-12 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-full text-2xl shadow-lg transition duration-300">
               æŸ¥çœ‹æˆ‘çš„ Top 3
           </button>
       </div>


       <!-- çµæœç•«é¢ -->
       <div id="results-screen" class="hidden">
           <!-- *** ä¿®æ”¹é»ï¼šæ¨™é¡Œè®Šæ›´ *** -->
           <h1 class="text-4xl md:text-5xl font-bold mb-8">æœ¬å±€ Top 3 æˆ°ç¸¾</h1>
           <div class="bg-gray-800 rounded-lg shadow-xl p-6 md:p-8 max-w-lg mx-auto">
               <ol id="results-list" class="text-left space-y-4">
                   <!-- æ’åå°‡ç”± JS å‹•æ…‹å¡«å…¥ -->
               </ol>
           </div>
          
           <!-- *** æ–°å¢ï¼šå…¨ç«™ç´¯ç©æ’è¡Œæ¦œ *** -->
           <h2 class="text-3xl md:text-4xl font-bold mt-16 mb-8">å…¨ç«™ç´¯ç© Top 10 æ’è¡Œæ¦œ</h2>
           <div class="bg-gray-800 rounded-lg shadow-xl p-6 md:p-8 max-w-lg mx-auto">
               <ol id="all-time-results-list" class="text-left space-y-4">
                   <!-- ç´¯ç©æ’åå°‡ç”± JS å‹•æ…‹å¡«å…¥ -->
               </ol>
           </div>
          
           <button id="restart-button" class="mt-12 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full text-2xl shadow-lg transition duration-300">
               å›åˆ°é¦–é 
           </button>
       </div>


   </div>


   <script>
       // --- é£Ÿç‰©è³‡æ–™åº« (æ‚¨å¯ä»¥æ“´å……é€™äº›åˆ—è¡¨) ---
       const chineseFoods = [
           { name: 'å°ç± åŒ…', icon: 'ğŸ¥Ÿ' }, { name: 'ç‰›è‚‰éºµ', icon: 'ğŸœ' }, { name: 'éº»å©†è±†è…', icon: 'ğŸ¥˜' }, { name: 'å®®ä¿é›ä¸', icon: 'ğŸ—' },
           { name: 'åŒ—äº¬çƒ¤é´¨', icon: 'ğŸ¦†' }, { name: 'ç³–é†‹é‡Œè‚Œ', icon: 'ğŸ·' }, { name: 'ç´…ç‡’ç…å­é ­', icon: 'ğŸ¦' }, { name: 'ä½›è·³ç‰†', icon: 'ğŸ²' },
           { name: 'æ±å¡è‚‰', icon: 'ğŸ–' }, { name: 'æ“”æ“”éºµ', icon: 'ğŸ' }, { name: 'ç‚’é£¯', icon: 'ğŸš' }, { name: 'ç‚’éºµ', icon: 'ğŸ¥¡' },
           { name: 'é¤ƒå­', icon: 'ğŸ¥Ÿ' }, { name: 'é¤›é£©', icon: 'ğŸ¥£' }, { name: 'æ˜¥æ²', icon: 'ğŸ«”' }, { name: 'è”¥æ²¹é¤…', icon: 'ğŸ¥' },
           { name: 'é‹è²¼', icon: 'ğŸ˜‹' }, { name: 'ç‡’è³£', icon: 'ğŸ¤¤' }, { name: 'è…¸ç²‰', icon: 'ğŸ¥¢' }, { name: 'å‰ç‡’åŒ…', icon: ' bun' },
           { name: 'éº»è¾£ç«é‹', icon: 'ğŸŒ¶ï¸' }, { name: 'ç¾Šè‚‰ä¸²', icon: 'ğŸ¢' }, { name: 'æ°´ç…®é­š', icon: 'ğŸŸ' }, { name: 'é…¸èœç™½è‚‰é‹', icon: 'ğŸ²' },
           { name: 'æ²¹æ¢', icon: 'ğŸ¥–' }, { name: 'è±†æ¼¿', icon: 'ğŸ¥›' }, { name: 'æœˆé¤…', icon: 'ğŸ¥®' }, { name: 'ç‚¸é†¬éºµ', icon: 'ğŸœ' },
           { name: 'æµ·èœ‡çš®', icon: 'ğŸŒŠ' }, { name: 'é†‰é›', icon: 'ğŸ”' }
       ];
       const westernFoods = [
           { name: 'ç¾©å¤§åˆ©éºµ', icon: 'ğŸ' }, { name: 'æŠ«è–©', icon: 'ğŸ•' }, { name: 'ç‰›æ’', icon: 'ğŸ¥©' }, { name: 'æ¼¢å ¡', icon: 'ğŸ”' },
           { name: 'ç†±ç‹—', icon: 'ğŸŒ­' }, { name: 'ç‚¸é›', icon: 'ğŸ—' }, { name: 'ç‡‰é£¯', icon: 'ğŸ¥˜' }, { name: 'æ²™æ‹‰', icon: 'ğŸ¥—' },
           { name: 'ä¸‰æ˜æ²»', icon: 'ğŸ¥ª' }, { name: 'æ½›è‰‡å ¡', icon: 'ğŸ¥–' }, { name: 'å¢¨è¥¿å“¥æ²é¤…', icon: 'ğŸŒ¯' }, { name: 'å¡”å¯', icon: 'ğŸŒ®' },
           { name: 'è‚‹æ’', icon: 'ğŸ–' }, { name: 'çƒ¤é›', icon: 'ğŸ”' }, { name: 'æ¿ƒæ¹¯', icon: 'ğŸ¥£' }, { name: 'ç„—çƒ¤', icon: 'ğŸ§€' },
           { name: 'ç‚¸é­šè–¯æ¢', icon: 'ğŸŸ' }, { name: 'ç­å°¼è¿ªå…‹è›‹', icon: 'ğŸ³' }, { name: 'é¬†é¤…', icon: 'ğŸ§‡' }, { name: 'æ³•å¼åå¸', icon: 'ğŸ' },
           { name: 'èµ·å¸æ‹¼ç›¤', icon: 'ğŸ§€' }, { name: 'é¾è¦', icon: 'ğŸ¦' }, { name: 'çƒ¤é¦¬éˆ´è–¯', icon: 'ğŸ¥”' }, { name: 'æ³•å¼æ´‹è”¥æ¹¯', icon: 'ğŸ§…' },
           { name: 'å¯éº—é¤…', icon: 'ğŸ¥' }, { name: 'è¥¿ç­ç‰™æµ·é®®é£¯', icon: 'ğŸ¥˜' }, { name: 'åƒå±¤éºµ', icon: ' lasagna' }, { name: 'è˜‹æœæ´¾', icon: 'ğŸ¥§' },
           { name: 'å¸ƒæœ—å°¼', icon: 'ğŸ«' }, { name: 'åŸ¹æ ¹', icon: 'ğŸ¥“' }
       ];
       const taiwaneseFoods = [
           { name: 'è±¬è¡€ç³•', icon: 'ğŸ¢' }, { name: 'æ»·è‚‰é£¯', icon: 'ğŸš' }, { name: 'èšµä»”ç…', icon: 'ğŸ¦ª' }, { name: 'è‡­è±†è…', icon: 'ğŸ¤¢' },
           { name: 'çç å¥¶èŒ¶', icon: 'ğŸ§‹' }, { name: 'è±†èŠ±', icon: 'ğŸ®' }, { name: 'åˆˆåŒ…', icon: 'ğŸ”' }, { name: 'è‚‰åœ“', icon: 'ğŸ˜' },
           { name: 'ç­’ä»”ç±³ç³•', icon: 'ğŸ™' }, { name: 'å¤§è…¸éºµç·š', icon: 'ğŸœ' }, { name: 'é›æ’', icon: 'ğŸ—' }, { name: 'é¹¹é…¥é›', icon: 'ğŸ”' },
           { name: 'ç”œä¸è¾£', icon: 'ğŸ¢' }, { name: 'è‚‰ç²½', icon: 'ğŸ™' }, { name: 'ç¢—ç²¿', icon: 'ğŸ¥£' }, { name: 'ç±³ç²‰æ¹¯', icon: 'ğŸ²' },
           { name: 'è—¥ç‡‰æ’éª¨', icon: 'ğŸ–' }, { name: 'åœ°ç“œçƒ', icon: 'ğŸ ' }, { name: 'è»Šè¼ªé¤…', icon: 'ğŸ¥' }, { name: 'èƒ¡æ¤’é¤…', icon: 'ğŸ«“' },
           { name: 'ç‰›è‚‰ä¹¾', icon: ' jerky' }, { name: 'é³³æ¢¨é…¥', icon: 'ğŸ' }, { name: 'æ„›ç‰å†°', icon: 'ğŸ§' }, { name: 'è”¥æŠ“é¤…', icon: 'ğŸ¥' },
           { name: 'é¼é‚Šè¶–', icon: 'ğŸ¥£' }, { name: 'æ£ºææ¿', icon: 'ğŸ' }, { name: 'èšµå—²', icon: 'ğŸ¦ª' }, { name: 'æ½¤é¤…', icon: 'ğŸŒ¯' },
           { name: 'å››ç¥æ¹¯', icon: 'ğŸ²' }, { name: 'éº»æ²¹é›', icon: 'ğŸ”' }
       ];
       const japaneseFoods = [
           { name: 'å£½å¸', icon: 'ğŸ£' }, { name: 'æ‹‰éºµ', icon: 'ğŸœ' }, { name: 'ç”Ÿé­šç‰‡', icon: 'Sashimi' }, { name: 'å¤©å©¦ç¾…', icon: 'ğŸ¤' },
           { name: 'é°»é­šé£¯', icon: 'é°»' }, { name: 'å‘³å™Œæ¹¯', icon: 'ğŸ¥£' }, { name: 'ç« é­šç‡’', icon: 'ğŸ™' }, { name: 'å¤§é˜ªç‡’', icon: 'ğŸ³' },
           { name: 'è±¬æ’é£¯', icon: 'ğŸ·' }, { name: 'å’–å“©é£¯', icon: 'ğŸ›' }, { name: 'çƒé¾éºµ', icon: 'ğŸ²' }, { name: 'èŒ¶ç¢—è’¸', icon: 'ğŸ®' },
           { name: 'é—œæ±ç…®', icon: 'ğŸ¢' }, { name: 'è¦ªå­ä¸¼', icon: 'ğŸ”' }, { name: 'é£¯ç³°', icon: 'ğŸ™' }, { name: 'è•éº¥éºµ', icon: 'Soba' },
           { name: 'å£½å–œç‡’', icon: 'ğŸ²' }, { name: 'ä¸²ç‡’', icon: 'ğŸ¢' }, { name: 'ç‰å­ç‡’', icon: 'ğŸ³' }, { name: 'æ‡·çŸ³æ–™ç†', icon: 'ğŸ±' },
           { name: 'å’Œç‰›', icon: 'ğŸƒ' }, { name: 'èŒ¶æ³¡é£¯', icon: 'ğŸµ' }, { name: 'æ˜å¤ªå­', icon: ' Mentaiko' }, { name: 'ç´è±†', icon: 'ğŸ¤¢' },
           { name: 'éº»ç³¬', icon: 'ğŸ¡' }, { name: 'å¯æ¨‚é¤…', icon: 'ğŸ˜' }, { name: 'æ—¥å¼ç‚¸é›', icon: 'ğŸ—' }, { name: 'ç‰›ä¸¼', icon: 'ğŸš' },
           { name: 'é®­é­šåµ', icon: ' Ikura' }, { name: 'æµ·è†½', icon: ' Uni' }
       ];


       // --- æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹ ---
       let allFoods = []; // å„²å­˜"æœ¬å±€"éŠæˆ²çš„é£Ÿç‰©ç‹€æ…‹
       let currentMatch = 0;
       const totalMatches = 10;
       let choiceA = null; // è¡›å†•è€…
       let choiceB = null; // æŒ‘æˆ°è€…


       // --- DOM å…ƒç´  ---
       const welcomeScreen = document.getElementById('welcome-screen');
       const gameScreen = document.getElementById('game-screen');
       const resultsScreen = document.getElementById('results-screen');
      
       const startButton = document.getElementById('start-button');
       const progressCounter = document.getElementById('progress-counter');
      
       const choiceAButton = document.getElementById('choice-a');
       const choiceBButton = document.getElementById('choice-b');
       const choiceAName = document.getElementById('choice-a-name');
       const choiceBName = document.getElementById('choice-b-name');
       const choiceAIcon = document.getElementById('choice-a-icon');
       const choiceBIcon = document.getElementById('choice-b-icon');
      
       const viewResultsButton = document.getElementById('view-results-button');
       const resultsList = document.getElementById('results-list');
       // *** æ–°å¢ï¼šå…¨ç«™æ’è¡Œæ¦œåˆ—è¡¨ ***
       const allTimeResultsList = document.getElementById('all-time-results-list');
      
       const restartButton = document.getElementById('restart-button');
       const restartGameButton = document.getElementById('restart-game-button');
       // *** æ–°å¢ï¼šæ¸…é™¤æŒ‰éˆ• ***
       const clearStorageButton = document.getElementById('clear-storage-button');


       // --- æ ¸å¿ƒåŠŸèƒ½ ---


       /**
        * åˆå§‹åŒ–æˆ–é‡ç½®"æœ¬å±€"éŠæˆ²çš„é£Ÿç‰©è³‡æ–™
        * é€™è£¡åªå»ºç«‹ "æœ¬å±€" è¦ç”¨çš„ä¹¾æ·¨è³‡æ–™
        */
       function initializeFoods() {
           const combinedList = [...chineseFoods, ...westernFoods, ...taiwaneseFoods, ...japaneseFoods];
          
           // é‡æ–°å»ºç«‹é£Ÿç‰©é™£åˆ—ï¼Œæ‰€æœ‰è¨ˆæ•¸å™¨æ­¸é›¶
           allFoods = combinedList.map(food => ({
               ...food,
               wins: 0,
               appearances: 0,
               score: 0 // score å…¶å¯¦å¯ä»¥ç§»é™¤ï¼Œå› ç‚ºæˆ‘å€‘åªçœ‹ wins
           }));
           currentMatch = 0;
       }


       /**
        * é–‹å§‹éŠæˆ²
        */
       function startGame() {
           initializeFoods(); // åœ¨é€™è£¡æ¸…é™¤ "æœ¬å±€" èˆŠç´€éŒ„
           welcomeScreen.classList.add('hidden');
           resultsScreen.classList.add('hidden');
           gameScreen.classList.remove('hidden');
           viewResultsButton.classList.add('hidden');
          
           // ç¢ºä¿å°æˆ°æŒ‰éˆ•é¡¯ç¤º
           choiceAButton.classList.remove('hidden');
           choiceBButton.classList.remove('hidden');
           document.querySelector('#game-screen span.text-4xl').classList.remove('hidden');


           pickFirstMatch();
       }


       /**
        * å›åˆ°æ­¡è¿ç•«é¢ (æ¸…é™¤ "æœ¬å±€" ç´€éŒ„çš„å…¥å£)
        */
       function goToWelcome() {
           gameScreen.classList.add('hidden');
           resultsScreen.classList.add('hidden');
           welcomeScreen.classList.remove('hidden');
       }
      
       /**
        * æŒ‘é¸ç¬¬ä¸€å ´å°æ±º (éš¨æ©Ÿ A vs éš¨æ©Ÿ B)
        */
       function pickFirstMatch() {
           currentMatch = 1;
           progressCounter.textContent = `ç¬¬ ${currentMatch} / ${totalMatches} å ´`;


           let indexA, indexB;
           do {
               indexA = Math.floor(Math.random() * allFoods.length);
               indexB = Math.floor(Math.random() * allFoods.length);
           } while (indexA === indexB); // ç¢ºä¿å…©è€…ä¸åŒ


           choiceA = allFoods[indexA];
           choiceB = allFoods[indexB];


           updateMatchUI();
       }


       /**
        * æ›´æ–°å°æ±ºç•«é¢ (è¡›å†•è€… vs æŒ‘æˆ°è€…)
        */
       function updateMatchUI() {
           choiceAName.textContent = choiceA.name;
           choiceAIcon.textContent = choiceA.icon;
           choiceBName.textContent = choiceB.name;
           choiceBIcon.textContent = choiceB.icon;
       }


       /**
        * è™•ç†ä½¿ç”¨è€…çš„é¸æ“‡
        * @param {object} winner - è¢«é¸æ“‡çš„é£Ÿç‰©ç‰©ä»¶
        * @param {object} loser - æœªè¢«é¸æ“‡çš„é£Ÿç‰©ç‰©ä»¶
        */
       function makeChoice(winner, loser) {
           // ç´€éŒ„å‹è² èˆ‡ç™»å ´ (åªåœ¨ "allFoods" é€™å€‹ "æœ¬å±€" è®Šæ•¸ä¸­)
           winner.wins++;
           winner.appearances++;
           loser.appearances++;


           // æª¢æŸ¥éŠæˆ²æ˜¯å¦çµæŸ
           if (currentMatch >= totalMatches) {
               showResultsButton(); // é¡¯ç¤º"æŸ¥çœ‹çµæœ"æŒ‰éˆ•
               return;
           }


           // éŠæˆ²ç¹¼çºŒï¼šè´å®¶æˆç‚ºæ–°çš„è¡›å†•è€… (choiceA)
           currentMatch++;
           progressCounter.textContent = `ç¬¬ ${currentMatch} / ${totalMatches} å ´`;
          
           choiceA = winner; // è´å®¶ç•™ä¸‹


           // æŒ‘é¸æ–°çš„æŒ‘æˆ°è€… (choiceB)
           let challengerIndex;
           do {
               challengerIndex = Math.floor(Math.random() * allFoods.length);
           } while (allFoods[challengerIndex].name === choiceA.name); // ç¢ºä¿æŒ‘æˆ°è€…ä¸æ˜¯è¡›å†•è€…è‡ªå·±
          
           choiceB = allFoods[challengerIndex];


           // æ›´æ–°ç•«é¢
           updateMatchUI();
       }


       /**
        * é¡¯ç¤ºæŸ¥çœ‹çµæœæŒ‰éˆ•
        */
       function showResultsButton() {
           // éš±è—å°æˆ°æŒ‰éˆ•å’Œ "VS"
           choiceAButton.classList.add('hidden');
           choiceBButton.classList.add('hidden');
           document.querySelector('#game-screen span.text-4xl').classList.add('hidden');
          
           progressCounter.textContent = `å·²å®Œæˆ ${totalMatches} å ´å°æ±ºï¼`;
           viewResultsButton.classList.remove('hidden'); // é¡¯ç¤ºæŸ¥çœ‹çµæœæŒ‰éˆ•
       }


       /**
        * è¨ˆç®—ä¸¦é¡¯ç¤ºæœ€çµ‚çµæœ (æœ¬å±€ Top 3 + å…¨ç«™ Top 10)
        */
       function showResults() {
          
           // --- 1. è™•ç† "æœ¬å±€" Top 3 ---
           const rankedFoodsThisGame = allFoods
               .filter(food => food.wins > 0) // åªé¡¯ç¤ºæœ¬å±€è´éçš„
               .sort((a, b) => b.wins - a.wins);


           const top3ThisGame = rankedFoodsThisGame.slice(0, 3);


           resultsList.innerHTML = ''; // æ¸…ç©ºèˆŠåˆ—è¡¨


           if (top3ThisGame.length === 0) {
               resultsList.innerHTML = '<li class="text-gray-400 text-center">æœ¬å±€æ²’æœ‰ä»»ä½•é£Ÿç‰©ç²å‹...</li>';
           } else {
               top3ThisGame.forEach((food, index) => {
                   const li = document.createElement('li');
                   li.className = 'text-xl flex items-center justify-between p-3 bg-gray-700 rounded';
                   li.innerHTML = `
                       <span class="flex items-center">
                           <span class="text-2xl font-bold w-10 text-yellow-400">#${index + 1}</span>
                           <span class="text-3xl mx-3">${food.icon}</span>
                           <span class="ml-2">${food.name}</span>
                       </span>
                       <span class="text-sm font-mono text-gray-300 text-right">
                           ${food.wins} å‹
                           <br>
                           <span class="text-xs text-gray-400">(${food.wins}å‹ / ${food.appearances}å ´)</span>
                       </span>
                   `;
                   resultsList.appendChild(li);
               });
           }


           // --- 2. è™•ç† "å…¨ç«™" ç´¯ç© Top 10 ---
          
           // å¾ localStorage è®€å–èˆŠçš„ç¸½ç´€éŒ„
           let allTimeScores = JSON.parse(localStorage.getItem('foodTournamentScores') || '[]');
          
           // ç‚ºäº†æ–¹ä¾¿æŸ¥æ‰¾ï¼Œå°‡é™£åˆ—è½‰ç‚º Map (key: é£Ÿç‰©åç¨±, value: é£Ÿç‰©ç‰©ä»¶)
           const scoreMap = new Map(allTimeScores.map(f => [f.name, f]));


           // éæ­· "æœ¬å±€" ç©éçš„é£Ÿç‰© (allFoods)
           allFoods.forEach(thisGameFood => {
               if (thisGameFood.appearances > 0) { // åªè¦æœ‰ç™»å ´éï¼Œå°±è¦æ›´æ–°
                   // å¾ Map ä¸­å–å¾—è©²é£Ÿç‰©çš„ "ç¸½ç´€éŒ„"
                   const allTimeData = scoreMap.get(thisGameFood.name) || {
                       name: thisGameFood.name,
                       icon: thisGameFood.icon,
                       wins: 0,
                       appearances: 0
                   };
                  
                   // å°‡ "æœ¬å±€" æˆ°ç¸¾ç´¯åŠ åˆ° "ç¸½ç´€éŒ„"
                   allTimeData.wins += thisGameFood.wins;
                   allTimeData.appearances += thisGameFood.appearances;
                  
                   // å°‡æ›´æ–°å¾Œçš„ "ç¸½ç´€éŒ„" æ”¾å› Map
                   scoreMap.set(allTimeData.name, allTimeData);
               }
           });


           // å°‡ Map è½‰å›é™£åˆ—ï¼Œé€™å°±æ˜¯æœ€æ–°çš„ "å…¨ç«™ç¸½ç´€éŒ„"
           const newAllTimeScores = Array.from(scoreMap.values());


           // å°‡æœ€æ–°çš„ "å…¨ç«™ç¸½ç´€éŒ„" å­˜å› localStorage
           localStorage.setItem('foodTournamentScores', JSON.stringify(newAllTimeScores));


           // --- 3. é¡¯ç¤º "å…¨ç«™" ç´¯ç© Top 10 ---


           // æ ¹æ“š "ç¸½å‹å ´ (wins)" æ’åº
           newAllTimeScores.sort((a, b) => b.wins - a.wins);


           const allTimeTop10 = newAllTimeScores.slice(0, 10);
          
           allTimeResultsList.innerHTML = ''; // æ¸…ç©ºèˆŠåˆ—è¡¨


           if (allTimeTop10.length === 0) {
               allTimeResultsList.innerHTML = '<li class="text-gray-400 text-center">å°šæœªæœ‰ç´¯ç©è¨˜éŒ„</li>';
           } else {
               allTimeTop10.forEach((food, index) => {
                   const li = document.createElement('li');
                   li.className = 'text-xl flex items-center justify-between p-3 bg-gray-700 rounded';
                   li.innerHTML = `
                       <span class="flex items-center">
                           <span class="text-2xl font-bold w-10 text-yellow-400">#${index + 1}</span>
                           <span class="text-3xl mx-3">${food.icon}</span>
                           <span class="ml-2">${food.name}</span>
                       </span>
                       <span class="text-sm font-mono text-gray-300 text-right">
                           ${food.wins} å‹
                           <br>
                           <span class="text-xs text-gray-400">(${food.wins}å‹ / ${food.appearances}å ´)</span>
                       </span>
                   `;
                   allTimeResultsList.appendChild(li);
               });
           }


           // é¡¯ç¤ºçµæœç•«é¢
           gameScreen.classList.add('hidden');
           resultsScreen.classList.remove('hidden');
       }


       // --- äº‹ä»¶ç›£è½ ---
       startButton.addEventListener('click', startGame);
      
       choiceAButton.addEventListener('click', () => {
           if (choiceA && choiceB) makeChoice(choiceA, choiceB);
       });
      
       choiceBButton.addEventListener('click', () => {
           if (choiceA && choiceB) makeChoice(choiceB, choiceA);
       });


       viewResultsButton.addEventListener('click', showResults);
      
       // D å…©å€‹é‡å•ŸæŒ‰éˆ•éƒ½å‘¼å« goToWelcome
       restartButton.addEventListener('click', goToWelcome);
       restartGameButton.addEventListener('click', goToWelcome);


       // *** æ–°å¢ï¼šæ¸…é™¤æŒ‰éˆ•çš„ç›£è½ ***
       clearStorageButton.addEventListener('click', () => {
           // ä½¿ç”¨ confirm è®“ä½¿ç”¨è€…å†æ¬¡ç¢ºèª
           if (confirm('æ‚¨ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰ç´¯ç©çš„å‹å ´è¨˜éŒ„å—ï¼Ÿæ­¤å‹•ä½œç„¡æ³•å¾©åŸã€‚')) {
               localStorage.removeItem('foodTournamentScores');
               // ç«‹å³æ›´æ–°ç•«é¢ä¸Šçš„å…¨ç«™æ’è¡Œæ¦œ (å¦‚æœæ­£åœ¨é¡¯ç¤º)
               if (!resultsScreen.classList.contains('hidden')) {
                   allTimeResultsList.innerHTML = '<li class="text-gray-400 text-center">æ‰€æœ‰ç´¯ç©è¨˜éŒ„å·²æ¸…é™¤</li>';
               }
               // ä½¿ç”¨ alert æç¤ºä½¿ç”¨è€…
               alert('æ‰€æœ‰ç´¯ç©è¨˜éŒ„å·²æ¸…é™¤ã€‚');
           }
       });


   </script>
</body>
</html>







